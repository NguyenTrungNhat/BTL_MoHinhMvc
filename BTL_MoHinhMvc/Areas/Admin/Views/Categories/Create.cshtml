@model BTL_MoHinhMvc.Models.Category

@{
    ViewBag.Title = "Create";
    Layout = "~/Areas/Admin/Views/Shared/LayoutAdmin.cshtml";
}


<div ng-app="myApp" ng-controller="CreateCategories">
    <h2>Create</h2>

    @using (Html.BeginForm())
    {
<div class="form-horizontal">
    <h4>Category</h4>
    <hr />
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    @*<div class="form-group" Style = "margin-bottom: 25px;">
            @Html.LabelFor(model => model.CategoryNumber, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10" Style = "margin-top: 10px;">
                @Html.EditorFor(model => model.CategoryNumber, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.CategoryNumber, "", new { @class = "text-danger" })
            </div>
        </div>*@

    <div class="form-group" Style="margin-bottom: 25px;" )>
        @*@Html.LabelFor(model => model.CategoryName, htmlAttributes: new { @class = "control-label col-md-2" })*@
        <label class="control-label col-md-2">CategoryName</label>
        <div class="col-md-10" Style="margin-top: 10px;">
            @*@Html.EditorFor(model => model.CategoryName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.CategoryName, "", new { @class = "text-danger" })*@
            <input ng-model="category.CategoryName" type="text" class="form-control" aria-describedby="basic-addon1">
        </div>
    </div>

    <div class="form-group" Style="margin-bottom: 25px">
        @*@Html.LabelFor(model => model.CategoryLevel, htmlAttributes: new { @class = "control-label col-md-2" })*@
        <label class="control-label col-md-2">CategoryLevel</label>
        <div class="col-md-10" Style="margin-top: 10px;">
            @*@Html.EditorFor(model => model.CategoryLevel, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.CategoryLevel, "", new { @class = "text-danger" })*@
            <input ng-model="category.CategoryLevel" type="text" class="form-control" aria-describedby="basic-addon1">
        </div>
    </div>
    <div class="form-group" Style="margin-bottom: 25px">
        @*@Html.LabelFor(model => model.CategoryLevel, htmlAttributes: new { @class = "control-label col-md-2" })*@
        <label class="control-label col-md-2">ParentID</label>
        <div class="col-md-10" Style="margin-top: 10px;">
            @*@Html.EditorFor(model => model.CategoryLevel, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.CategoryLevel, "", new { @class = "text-danger" })*@
            <input ng-model="category.ParentID" type="text" class="form-control" aria-describedby="basic-addon1">
        </div>
    </div>

    <div class="form-group" Style="margin-bottom: 25px">
        <div class="col-md-offset-2 col-md-10" Style="margin-top: 10px;">
            <input ng-click="AddCategory()" value=" Thêm mới" class="btn btn-default btn-primary fa fa-plus" />
        </div>
    </div>
</div>
    }

    <div>
        @Html.ActionLink("Back to List", "Index")
    </div>
</div>

@section Script2{
    <script src="/Scripts/angular.min.js"></script>
    <script>
        var myApp = angular.module('myApp', []);
        myApp.controller('CreateCategories', function ($scope, $location, $http) {
            $scope.category = {

            }

            $scope.AddCategory = AddCategory;
            function AddCategory() {
                $http.post("/Admin/Categories/Create", $scope.category).then(function (result) {
                    window.location.href = "http://localhost:64560/Admin/Categories";
                }, function (error) {
                    alert("Thất bại")
                    console.log($scope.category)
                });
            }
        }
        );
    </script>
}



